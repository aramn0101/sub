<!DOCTYPE html>
<html>
  <head>
    <title>Auto-Loading Subtitles</title>
  </head>
  <body>
    <div id="video-player">
      <video id="video-element" src="Video.mkv" controls></video>
    </div>
    <script>
      const videoElement = document.getElementById("video-element");
      const subtitleSelect = document.getElementById("subtitle-select");

      fetch("")
        .then((response) => response.json())
        .then((subtitles) => {
          if (subtitles && subtitles.length > 0) {
            subtitles.forEach((subtitle) => {
              const option = document.createElement("option");
              option.value = subtitle.url;
              option.textContent = subtitle.label;
              subtitleSelect.appendChild(option);
            });
          }
          subtitleSelect.addEventListener("change", () => {
            const selectedSubtitle = subtitleSelect.value;
            if (selectedSubtitle) {
              const trackElement = document.createElement("track");
              trackElement.src = selectedSubtitle;
              trackElement.kind = "subtitles";
              trackElement.default = true;
              videoElement.appendChild(trackElement);
            } else {
              const trackElement = videoElement.querySelector(
                'track[kind="subtitles"]'
              );
              if (trackElement) {
                trackElement.remove();
              }
            }
          });
        });
    </script>
  </body>
</html>
